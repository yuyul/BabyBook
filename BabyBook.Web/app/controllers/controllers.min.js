app.controller("adminCentrosController",["$scope","centrosService","$rootScope",function(n,t,i){console.log("centros");n.centros=[];t.getCentros().then(function(t){n.centros=t.data},function(){console.log("error")});n.seleccionaCentro=function(n){i.centroSeleccionado=n}}]);app.controller("agendasController",["$scope","$routeParams","agendasService","$location",function(n,t,i){n.controles=[];n.control={};n.newControl="";i.getByAlumnoId(t.id).then(function(t){n.controles=t.data});n.editControl=function(i){i==="new"?(n.newControl=!0,n.control={fecha:"",alumnoId:t.id,observacionesCasa:"",observacionesCentro:"",estadoDia:"",comida:"",siesta:"",merienda:"",deposicion:""}):(n.newControl=!1,n.control=i)};n.save=function(r){var u=!0,f;n.newControl&&(f=n.controles.filter(function(n){var t=new Date(n.fecha);return t.getDate()==r.fecha.getDate()&&t.getMonth()==r.fecha.getMonth()&&t.getFullYear()==r.fecha.getFullYear()}),f.length>0&&(u=!1,alert("Ya existe un control para el día seleccionado. Los datos no serán guardados.")));u&&(i.saveControl(r),setTimeout(function(){i.getByAlumnoId(t.id).then(function(t){n.controles=t.data})},1e3))}}]);app.controller("alumnosController",["$scope","alumnosService","$rootScope","$location","$routeParams",function(n,t,i,r,u){n.alumnos=[];n.familiares=[];n.consulta="";n.alumno={id:"",nombre:"",primerApellido:"",segundoApellido:"",fechaAlta:"",fechaBaja:"",fechaNacimiento:"",centroId:"",foto:""};n.message="";n.files=[];n.newAlumno="";n.onFileSelect=function(t){n.files=t};u.id===undefined?t.getAlumnosByCentro(i.centroSeleccionado).then(function(t){n.alumnos=t.data}):t.getAlumnoById(u.id).then(function(t){n.alumno=t.data});n.editAlumno=function(t){t==="new"?(n.newAlumno=!0,n.alumno={id:0,nombre:"",primerApellido:"",segundoApellido:"",fechaNacimiento:"",centroId:i.centroSeleccionado,foto:""}):(n.newAlumno=!1,n.alumno=t)};n.save=function(r){t.uploadAlumno(r,n.files[0]);setTimeout(function(){t.getAlumnosByCentro(i.centroSeleccionado).then(function(t){n.alumnos=t.data})},3e3)};n.addFamiliar=function(i){t.addFamiliar(n.alumno.id,i)};n.verFamiliares=function(i){n.alumno=i;t.getFamiliaresByAlumno(i.id).then(function(t){n.familiares=t.data})}}]);app.controller("centrosController",["$scope","$location","centrosService","$rootScope",function(n,t,i,r){console.log("centros");n.centros=[];n.centro={id:0,nombre:"",direccion:""};n.message="";n.messageok="";n.newCentro="";i.getCentrosByUser().then(function(t){n.centros=t.data},function(){console.log("error")});n.save=function(t){n.newCentro?(i.addCentro(n.centro).then(function(){n.messageok="Centro guardado correctamente"},function(t){n.message=t.error_description}),u()):i.updateCentro(t).then(function(){n.messageok="Centro guardado correctamente"},function(t){n.message=t.error_description})};n.seleccionaCentro=function(n){r.centroSeleccionado=n};n.editCentro=function(t){t==="new"?(n.newCentro=!0,n.centro={id:0,nombre:"",direccion:""}):(n.newCentro=!1,n.centro=t)};n.deleteCentro=function(n){i.deleteCentro(n);u()};var u=function(){setTimeout(function(){i.getCentrosByUser().then(function(t){n.centros=t.data},function(){console.log("error")})},1e3)}}]);app.controller("clasesController",["$scope","$location","clasesService","$rootScope","alumnosService","cursosService","$routeParams",function(n,t,i,r,u,f,e){var h,c,s,o;console.log("clases");n.clases=[];n.clase={id:"",nombre:"",centroId:""};n.asignacion={AlumnoId:"",ClaseId:"",CursoId:""};n.alumnos=[];n.cursos=[];n.cursoSeleccionado="";n.message="";n.messageok="";n.isAsignacion=!1;n.isVerAlumnos=!1;e.id===undefined?i.getClasesByCentro(r.centroSeleccionado).then(function(t){n.clases=t.data},function(){console.log("error")}):i.getByClaseId(e.id).then(function(t){n.clase=t.data},function(){console.log("error")});n.save=function(){n.clase.id==""?h():c()};h=function(){n.clase.CentroId=r.centroSeleccionado;i.createClase(n.clase).then(function(){t.path("/home")},function(t){n.message=t.error_description})};c=function(){i.updateClase(n.clase).then(function(){t("/home")},function(t){n.message=t.error_description})};n.editClase=function(t){o();t==="new"?(n.newClase=!0,n.clase={id:0,nombre:"",centroId:r.centroSeleccionado}):(n.newClase=!1,n.clase=t)};n.cargarAlumnos=function(t){n.isAsignacion?u.getAlumnosSinAsignarByCentroCurso(r.centroSeleccionado,t).then(function(t){n.alumnos=t.data},function(){console.log("error")}):u.getAlumnosByClaseCurso(n.clase.id,t).then(function(t){n.alumnos=t.data},function(){console.log("error")})};n.mostrarAlumnos=function(t){n.isAsignacion=!0;n.isVerAlumnos=!1;n.clase=t;n.alumnos=[];s();o()};n.verAlumnos=function(t){n.isVerAlumnos=!0;n.isAsignacion=!1;n.clase=t;n.alumnos=[];s();o()};n.asignarAlumnos=function(t,r){var u=[];n.alumnos.filter(function(n){return n.seleccionado==!0}).forEach(function(n){var i={alumnoId:n.id,cursoId:r,claseId:t};u.push(i)});i.asignarAlumnos(u).then(function(){n.messageok="Asignación guardada correctamente"},function(t){n.message=t.error_description})};n.eliminarAsignacion=function(t,r){var u=[];n.alumnos.filter(function(n){return n.seleccionado==!0}).forEach(function(n){var i={alumnoId:n.id,cursoId:r,claseId:t};u.push(i)});i.eliminarAsignacion(u).then(function(){n.messageok="Asignación eliminada correctamente"},function(t){n.message=t.error_description})};s=function(){f.getCursosByCentro(r.centroSeleccionado).then(function(t){n.cursos=t.data},function(){console.log("error")})};n.muestraCurso=function(n){alert(n.id)};o=function(){n.message="";n.messageok=""}}]);app.controller("cursosController",["$scope","$location","cursosService","$rootScope","$routeParams",function(n,t,i,r,u){console.log("cursos");n.cursos=[];n.curso={id:"",descripcion:"",fechaInicio:"",fechaFin:"",centroId:""};n.message="";u.id===undefined?i.getCursosByCentro(r.centroSeleccionado).then(function(t){n.cursos=t.data},function(){console.log("error")}):i.getCursoById(u.id).then(function(t){n.curso=t.data},function(){console.log("error")});n.createCurso=function(){n.newCurso?(n.curso.centroId=r.centroSeleccionado,i.createCurso(n.curso).then(function(){},function(t){n.message=t.error_description})):i.updateCurso(n.curso).then(function(){},function(t){n.message=t.error_description})};n.editCurso=function(t){t==="new"?(n.newCurso=!0,n.curso={id:"0",descripcion:"",fechaInicio:"",fechafin:"",centroId:r.centroSeleccionado}):(n.newCurso=!1,n.curso=t)}}]);app.controller("dataController",function(n){n.data={text:"Hello"}});app.controller("familiaresController",["$scope","alumnosService",function(n,t){n.alumnos=[];t.getAlumnosByFamiliar().then(function(t){n.alumnos=t.data})}]);app.controller("homeController",["$scope","$location","authService","$rootScope","centrosService","$route",function(n,t,i,r,u,f){console.log("home");var e=i.authentication;n.isAdmin=e.roleName==="Admin";n.isGestor=e.roleName==="Gestor";n.isProfesor=e.roleName==="Profesor";n.isFamiliar=e.roleName==="Familiar";n.authentication=e;n.centerSelected=r.centroSeleccionado!="";n.centros=[];n.seleccionaCentro=function(n){r.centroSeleccionado=n;f.reload()};e.isAuth&&u.getCentrosByUser().then(function(t){n.centros=t.data})}]);app.controller("homeyController",["$scope","$routeParams",function(n,t){n.roleName=t.role}]);app.controller("indexController",["$translate","$scope","$location","authService","$rootScope",function(n,t,i,r,u){console.log("index");t.logOut=function(){r.logOut();u.centroSeleccionado="";i.path("/home")};t.changeLanguage=function(t){n.use(t)};t.authentication=r.authentication}]);app.controller("loginController",["$scope","$location","authService",function(n,t,i){console.log("login");n.loginData={userName:"",password:""};n.message="";n.login=function(){i.login(n.loginData).then(function(){t.path("/home")},function(t){n.message=t.error_description})}}]);app.controller("profesoresController",["$scope","$location","profesoresService","$rootScope","clasesService","alumnosService",function(n,t,i,r,u,f){console.log("profesores");n.profesores=[];n.clases=[];n.profesor={id:0,nombre:"",primerApellido:"",segundoApelido:"",email:"",centroId:"",claseId:""};n.message="";n.messageok="";n.alumnos=[];n.claseSeleccionada=0;t.path()=="/profesores"?i.getProfesoresByCentro(r.centroSeleccionado).then(function(t){n.profesores=t.data},function(){console.log("error")}):f.getAlumnosByProfesor().then(function(t){n.alumnos=t.data},function(){console.log("error")});n.editProfesor=function(t){n.message="";n.messageok="";t==="new"?(n.newProfesor=!0,n.profesor={id:0,nombre:"",primerApellido:"",segundoApelido:"",email:"",centroId:r.centroSeleccionado,claseId:""}):(n.newProfesor=!1,n.profesor=t)};n.save=function(t){n.newProfesor?(i.createProfesor(t).then(function(){n.messageok="Profesor guardado correctamente"},function(t){n.message=t.error_description}),e()):i.updateProfesor(t).then(function(){n.messageok="Profesor guardado correctamente"},function(t){n.message=t.error_description})};n.mostrarClases=function(t){n.profesor=t;n.claseSeleccionada=t.claseId;u.getClasesByCentro(r.centroSeleccionado).then(function(t){n.clases=t.data},function(){console.log("error")})};n.asignarClase=function(t){i.updateProfesor(t).then(function(){n.messageok="Asignación guardada correctamente"},function(t){n.message=t.error_description;console.log("error")});e()};var e=function(){setTimeout(function(){i.getProfesoresByCentro(r.centroSeleccionado).then(function(t){n.profesores=t.data},function(){console.log("error")})},1e3)}}]);app.controller("signupController",["$scope","$location","$timeout","authService",function(n,t,i,r){n.savedSuccessfully=!1;n.message="";n.registration={userName:"",password:"",confirmPassword:"",email:""};n.signUp=function(){r.saveRegistration(n.registration).then(function(){n.savedSuccessfully=!0;n.message="User has been registered successfully, you will be redicted to login page in 2 seconds.";u()},function(t){var u=[],r,i;for(r in t.data.modelState)for(i=0;i<t.data.modelState[r].length;i++)u.push(t.data.modelState[r][i]);n.message="Failed to register user due to:"+u.join(" ")})};var u=function(){var n=i(function(){i.cancel(n);t.path("/login")},2e3)}}]);app.controller("usuariosController",["$scope","usuariosService",function(n,t){console.log("usuarios");n.usuarios=[];t.getUsuarios().then(function(t){n.usuarios=t.data},function(){console.log("error")})}]);
/*
//# sourceMappingURL=controllers.min.js.map
*/